<div class="palette">
  <button (click)="addShape('rectangle')">Create Rectangle</button>
  <button (click)="addShape('circle')">Create Circle</button>
</div>

<svg class="canvas" (mousemove)="onMouseMove($event)" (mouseup)="onMouseUp()">
  <ng-container *ngFor="let shape of shapes">
    <rect
      *ngIf="shape.type === 'rectangle'"
      [attr.x]="shape.x"
      [attr.y]="shape.y"
      [attr.width]="shape.width"
      [attr.height]="shape.height"
      fill="lightblue"
      (mousedown)="onMouseDown($event, shape)"
    />

    <circle
      *ngIf="shape.type === 'circle'"
      [attr.cx]="shape.x + shape.width / 2"
      [attr.cy]="shape.y + shape.height / 2"
      [attr.r]="shape.width / 2"
      fill="lightgreen"
      (mousedown)="onMouseDown($event, shape)"
    />

    <circle
      *ngFor="let cp of shape.connectionPoints"
      [attr.cx]="shape.x + cp.x"
      [attr.cy]="shape.y + cp.y"
      r="4"
      fill="red"
    />
  </ng-container>
</svg>
